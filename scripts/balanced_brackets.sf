#!/usr/bin/perl

# Translation of: http://rosettacode.org/wiki/Balanced_brackets#Perl

func balanced (str) {

    var depth = 0;

    str.each { |c|
           if(c=='['){ depth++ }
        elsif(c==']'){ depth-- < 0 && (return(false)) }
    }

    return (!depth);
}

for [
    ']',
    '[',
    '[[]',
    '][]',
    '[[]]',
    '[[]]]][][]]',
    'x[ y [ [] z ]][ 1 ][]abcd'
   ]
{ |str|
    printf("%sbalanced\t: %s\n", balanced(str) ? "" : "NOT ", str);
}
