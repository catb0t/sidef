#!/usr/bin/ruby

func is_fib (pos, fib) {
    5.sqrt*fib + (-(1.25.sqrt-0.5)**pos) log(1.25.sqrt+0.5) round(pos) == pos;
}

for [
      [12  => 144                   => true],
      [12  => 143                   => false],
      [12  => 145                   => false],
      [13  => 233                   => true],
      [49  => 1337                  => false],
      [32  => 2178309               => true],
      [100 => 354224848179261915075 => true],
    ]{|pos,             num,            bool|

    is_fib(pos, num) == bool || ("Validation error!\n".die);

    "%21s is on position %3s in the fibonacci sequence: %s\n"
        -> printf(num, pos, bool);
}
