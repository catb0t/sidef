#!/usr/bin/ruby

var x = nil
var z = 42

var ok = []

#
## orwith
#
with(x) {
    say "x"
}
orwith(z) { |value|
    ok << value
    ok << "z"
}
else {
    say "something else"
}

#
## with
#
with(1234) {
    ok << _
}

#
## else
#
with(nil) {

}
orwith(nil) {

}
orwith(x) {

}
else {
    ok << "else"
}

#
## with/else
#

with (x) {

}
else {
    ok << 'else2'
}

assert_eq(ok, [42, 'z', 1234, 'else', 'else2'])

say "** Test passed!"
