#!/usr/bin/ruby

var a = [
          [1, 2],
          [3, 4],
          [5, 6],
          [7, 8]
        ]

var b = [
          [1, 2, 3],
          [4, 5, 6]
        ]

assert_eq(a `mmul` b,
    [
        [ 9,  12,  15],
        [19,  26,  33],
        [29,  40,  51],
        [39,  54,  69],
    ]
)

var A =
    [
         [-75, -49,  56, -62],
         [ 36,  86, -20,  88],
         [-56,  20, -97, -25],
         [ 75, -91, -41, -38],
    ]

assert_eq(A.det, A.det_bareiss)
assert_eq(A.invert.invert, A)

var B = [
    [2, -1,  5,  1],
    [3,  2,  2, -6],
    [1,  3,  3, -1],
    [5, -2, -3,  3],
]

assert_eq(B.inv, [
    [  4/171,   11/171,  10/171,   8/57],
    [-55/342,  -23/342, 119/342,   2/57],
    [107/684,   -5/684,  11/684, -7/114],
    [  7/684, -109/684, 103/684,  7/114],
])

assert_eq(B.inv.inv, B)
assert_eq(B `msolve` [-3, -32, -47, 49], [2, -12, -4, 1])
assert_eq(B.det, 684)
assert_eq(B.inv.det, 1/684)

assert_eq([].det, 1)
assert_eq([[]].det, 1)

assert_eq([[]].inv, [[]])
assert_eq([].inv, [])

say "** Test passed!"
