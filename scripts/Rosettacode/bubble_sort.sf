#!/usr/bin/ruby

# http://rosettacode.org/wiki/Sorting_algorithms/Bubble_sort#Sidef

func bubble_sort(arr is Array) -> Array {
    loop {
        var hasChanged = false;
        { |index|
            arr[index-1] > arr[index] && (
                arr[index-1, index] = arr[index, index-1];
                hasChanged = true;
            );
        } * arr.offset;
        hasChanged || break;
    };
    return arr;
}

var arr = [4,5,9,6,3,7,1,8,2];
say bubble_sort(arr).dump;
